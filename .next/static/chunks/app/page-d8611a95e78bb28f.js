(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9391:function(e,s,t){Promise.resolve().then(t.bind(t,3618))},3618:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var l=t(7437),a=t(2265),r=t(9763);let n=(0,r.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var i=t(2369);let c=(0,r.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var o=t(9376),d=t(605);let x=(0,r.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),m=(0,r.Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);var h=t(401);function u(e){let{open:s,onClose:t}=e,[r,n]=(0,a.useState)(!1),i=async e=>{n(!0);try{let s=await fetch("/api/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:e})}),t=await s.json();if(t.url)window.location.href=t.url;else throw Error("No checkout URL received")}catch(e){console.error("Checkout error:",e),alert("Failed to start checkout. Please try again.")}finally{n(!1)}};return s?(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,l.jsxs)("div",{className:"bg-gray-900 text-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-700",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"Upgrade to Premium"}),(0,l.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:(0,l.jsx)(x,{size:24})})]}),(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"text-center mb-6",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,l.jsx)(m,{className:"text-white",size:32})}),(0,l.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Unlock Unlimited Scans"}),(0,l.jsx)("p",{className:"text-gray-400",children:"Get unlimited gym equipment analysis and expert guidance"})]}),(0,l.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,l.jsxs)("div",{className:"border border-gray-700 rounded-lg p-4 hover:border-yellow-500 transition-colors",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold",children:"Monthly Plan"}),(0,l.jsx)("p",{className:"text-gray-400 text-sm",children:"Unlimited scans"})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:"$9.99"}),(0,l.jsx)("div",{className:"text-gray-400 text-sm",children:"/month"})]})]}),(0,l.jsx)("button",{onClick:()=>i("monthly"),disabled:r,className:"w-full mt-3 bg-yellow-500 text-black py-2 px-4 rounded-lg font-semibold hover:bg-yellow-400 transition-colors disabled:opacity-50",children:r?"Processing...":"Choose Monthly"})]}),(0,l.jsxs)("div",{className:"border border-yellow-500 rounded-lg p-4 relative",children:[(0,l.jsx)("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2",children:(0,l.jsx)("span",{className:"bg-yellow-500 text-black px-3 py-1 rounded-full text-sm font-semibold",children:"Best Value"})}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold",children:"Annual Plan"}),(0,l.jsx)("p",{className:"text-gray-400 text-sm",children:"Unlimited scans"})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:"$99.99"}),(0,l.jsx)("div",{className:"text-gray-400 text-sm",children:"/year"})]})]}),(0,l.jsx)("button",{onClick:()=>i("annual"),disabled:r,className:"w-full mt-3 bg-yellow-500 text-black py-2 px-4 rounded-lg font-semibold hover:bg-yellow-400 transition-colors disabled:opacity-50",children:r?"Processing...":"Choose Annual"})]})]}),(0,l.jsxs)("div",{className:"space-y-2 text-sm text-gray-300",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h.Z,{size:16,className:"text-green-500 mr-2"}),"Unlimited equipment scans"]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h.Z,{size:16,className:"text-green-500 mr-2"}),"Expert form guidance"]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h.Z,{size:16,className:"text-green-500 mr-2"}),"Detailed usage instructions"]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h.Z,{size:16,className:"text-green-500 mr-2"}),"Cancel anytime"]})]})]})]})}):null}function g(){let e=(0,o.useRouter)(),{data:s}=(0,d.useSession)(),[t,r]=(0,a.useState)(!1),[x,m]=(0,a.useState)(null),[h,g]=(0,a.useState)(0),[b,f]=(0,a.useState)(!1),[y,p]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),v=(0,a.useRef)(null),w=b||h<1,k=async t=>{var l;let a=null===(l=t.target.files)||void 0===l?void 0:l[0];if(a){if(!s){e.push("/sign-in");return}if(!w){N(!0);return}r(!0);try{let s=await new Promise(e=>{let s=new FileReader;s.onload=()=>e(s.result),s.readAsDataURL(a)}),t=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:s.split(",")[1]})}),l=await t.json();if(t.ok)m(l.explanation),g(e=>e+1),y||b||(p(!0),N(!0));else{if(401===t.status){e.push("/sign-in");return}if(403===t.status&&"LIMIT_REACHED"===l.code){N(!0);return}throw Error(l.error||"Analysis failed")}}catch(e){console.error("Analysis error:",e),alert("Failed to analyze image. Please try again.")}finally{r(!1)}}};return(0,l.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,l.jsxs)("header",{className:"flex justify-between items-center p-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-green-500",children:"FormAI"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:()=>e.push("/history"),className:"p-2 hover:bg-gray-800 rounded-lg",children:(0,l.jsx)(n,{size:24})}),(0,l.jsx)("button",{onClick:()=>e.push("/profile"),className:"p-2 hover:bg-gray-800 rounded-lg",children:(0,l.jsx)(i.Z,{size:24})})]})]}),(0,l.jsxs)("main",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsx)("span",{className:"px-4 py-2 rounded-full text-sm font-semibold ".concat(b?"bg-green-500 text-black":"bg-gray-700 text-white"),children:b?"Premium":"Free (".concat(h,"/1 scans)")})}),(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsxs)("h2",{className:"text-3xl font-bold mb-4",children:["SCAN YOUR",(0,l.jsx)("br",{}),(0,l.jsx)("span",{className:"text-green-500",children:"GYM MACHINE"})]}),(0,l.jsxs)("p",{className:"text-gray-400 mb-8",children:["Position the machine within the frame",(0,l.jsx)("br",{}),"Ensure good lighting for best results"]})]}),(0,l.jsxs)("div",{className:"relative w-80 h-80 border-2 border-dashed border-gray-600 rounded-lg flex items-center justify-center mb-8",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(c,{size:48,className:"mx-auto mb-4 text-gray-400"}),(0,l.jsx)("p",{className:"text-gray-400 mb-4",children:"Click to select image"}),(0,l.jsx)("button",{onClick:()=>{var e;null===(e=v.current)||void 0===e||e.click()},disabled:!w||t,className:"px-6 py-3 rounded-full font-semibold ".concat(w&&!t?"bg-green-500 text-black hover:bg-green-600":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:t?"Analyzing...":"Select Image"})]}),(0,l.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:k,className:"hidden"})]}),x&&(0,l.jsxs)("div",{className:"w-full max-w-2xl bg-gray-800 rounded-lg p-6 mb-8",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold mb-4 text-green-500",children:"Analysis Result"}),(0,l.jsx)("p",{className:"text-gray-300 leading-relaxed",children:x}),(0,l.jsx)("button",{onClick:()=>m(null),className:"mt-4 text-green-500 hover:text-green-400",children:"Close"})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:()=>e.push("/pricing"),className:"px-6 py-3 bg-green-500 text-black rounded-full font-semibold hover:bg-green-600",children:"Go Premium"}),!w&&(0,l.jsx)("button",{onClick:()=>{g(0),f(!1)},className:"px-6 py-3 bg-red-500 text-white rounded-full font-semibold hover:bg-red-600",children:"Reset Scans"})]})]}),(0,l.jsx)("footer",{className:"p-6 text-center text-gray-500",children:(0,l.jsx)("p",{children:"\xa9 2024 FormAI. AI-powered gym equipment analysis."})}),(0,l.jsx)(u,{open:j,onClose:()=>N(!1)})]})}},9763:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var l=t(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,s)=>{let t=(0,l.forwardRef)((t,n)=>{let{color:i="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:x="",children:m,...h}=t;return(0,l.createElement)("svg",{ref:n,...a,width:c,height:c,stroke:i,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(r(e)),x].join(" "),...h},[...s.map(e=>{let[s,t]=e;return(0,l.createElement)(s,t)}),...Array.isArray(m)?m:[m]])});return t.displayName="".concat(e),t}},401:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2369:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[307,971,117,744],function(){return e(e.s=9391)}),_N_E=e.O()}]);